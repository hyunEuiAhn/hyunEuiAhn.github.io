---
layout: post
title:  "쿠키 세션 그리고 인증"
date:   2021-02-08
excerpt: "쿠키와 세션의 차이 그리고 인증"
server: true
tag:
- 쿠키
- 세션
- 인증
comments: false
---


# 목차
* 쿠키와 세션의 탄생
* 쿠키
* 세션
* 인증

---


## 쿠키와 세션의 탄생
쿠키와 세션은 http 프로토콜의 약점을 (connectionless, stateless) 보안하기 위해 생겨났습니다. 

connectionless - 클라이언트가 요청을 한 후 응답을 받으면 연결을 끊어버린다.

stateless - 통신이 끝나면 상태를 유지하지 않는다. (로그인을 한 번 하였지만 페이지를 전환하면 로그인 상태가 날아감)

위와 같은 문제를 쿠키와 세션을 활용하여 해결할 수 있습니다.

## 쿠키

- 클라이언트 로컬에 저장되는 데이터 파일

- 사용자가 따로 요청하지 않아도 request 시 서버에 데이터 값을 같이 전송.

- 만료 시간이 정해져 있다.

- 브라우저가 종료 되어도 쿠키 만료 기간 내 이면 클라이언트에 보관 된다.

- 이전 값이 변경되면 쿠키 값이 업데이트 된다.

## 세션

- 서버에 데이터 값이 저장 된다.

- 브라우저가 종료되면 서버와 연결이 끊기고 세션 값이 사라짐.

- 서버에 데이터를 관리하기 때문에 쿠키보다 보안이 뛰어남. 

- 사용자가 많아지면 트레픽이 증가하여 서버에 부하가 생길 수 있다.

## 인증

사용자가 증가하고 세션을 통해서 로그인을 검증하는 방식이 부하가 생기면 서버에 무리가 온다.
이를 방지하기 위해서 토큰기반 인증을 사용합니다.

서버는 사용자에게 웹 페이지를 제공합니다. 사용자가 웹 페이지에 접속하여 로그인을 하면 서버는 세션을 생성하고 보관한 후 사용자의 이후 요청에 대해서 세션 저장소에 저장 돼 있는 정보를 파악하여 작업을 진행합니다. 

세션을 사용하면 서버의 확장성에 무리가 생깁니다. 확장성이란, 서버가 많은 트레픽을 감당하기 위해서 여러개의 프로세스를 돌리거나, 여러 대의 서버 컴퓨터를 돌리는 것.

토큰 기반 인증 시스템은 stateless 하다. 즉 서버에서 상태를 보관하지 않는다. 유저의 인증 정보나 세션을 담아두지 않는다. 

##토큰 기반 인증  

- 클라이언트가 서버가 제공하는 웹 페이지에 접속하여 로그인을 한다.

- 로그인 인증이 완료 되면 서버는 토큰을 생성하여 클라이언트에게 보낸다.

- 클라이언트에 토큰을 보관하고, 서버에 요청이 있을 때마다 토큰을 함께 보낸다.

- 서버는 토큰을 검증하고, 요청에 응답한다.

- 토큰에 선택적 권한만을 부여하여 발급이 가능하다. 

JWT(JSON WEB TOKEN) - 웹 표준에 등록 돼 있어 여러 환경에서 지원이 가능하다.
---


